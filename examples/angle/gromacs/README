10.9.2010

This directory contains the files necessary to simulate a Kremer-Grest
ring polymer melt using GROMACS. This is for benchmarking and profiling
purposes. The melt is composed of 200 chains with 200 monomers per
chain.


=== Build Gromacs ===

Below we build a double-precision single-processor version:

./configure CXXFLAGS=-O3 --with-fft=fftw3 CPPFLAGS="-L$HOME/software/fftw3/include"
            LDFLAGS="-L$HOME/software/fftw3/lib" --prefix=$HOME/software/gromacsO3
            --without-x --disable-float
make -j 3
make install


=== Running the benchmark ===

Step 1: grompp_d -maxwarn 2 -c conf.gro -f grompp.mdp -p topol.top

The step above produces the topol.tpr file. This file is then used next:

Step 2: mdrun_d -s topol.tpr -nt 1

Examine md.log for CPU time, etc. One must use bin/g_energy to examine ener.edr.

To compute the energy and pressure at every time step modify grompp.mdp as follows:
nstenergy = 1

Then after Step 2 do the following from the shell:
$ echo "Pressure" | g_energy -o pressure.xvg
$ echo "Total-Energy" | g_energy -o energy.xvg
pressure.xvg and energy.xvg will contain the time series. Keep in
mind that Gromacs writes the pressure in units of bar. To convert
to LJ units use 1 kJ/mol/nm^3 = 16.6054 bar.


=== Alternative version ===

At MPIP do the following to get the version created by C. Junghans:
source /sw/linux/gromacs/4.5/static/4.5.2/bin/GMXRC


=== Creating the gro file ===

The conf.gro file was created from rings.dat using the following
Python script:

==============================================================
f = open('rings.dat')
data = f.readlines()
f.close()

f = open('conf.gro', 'w')
f.write('Rings\n')
f.write('40000\n')

fmt = '%5d%s%03d%5d%8.3f%8.3f%8.3f%8.4f%8.4f%8.4f\n'

ct = 0
for i in range(200):
  for j in range(1, 201):
    x = float(data[ct].split()[3])
    y = float(data[ct].split()[4])
    z = float(data[ct].split()[5])
    f.write(fmt % (i + 1, 'RING  A', j, ct + 1, x, y, z, 0.0, 0.0, 0.0))
    ct = ct + 1

s = '  36.1033 36.1033 36.1033\n'
f.write(s)
f.close()
==============================================================
